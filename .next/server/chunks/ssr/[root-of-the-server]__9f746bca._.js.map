{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ASUS/Downloads/AI-Mock-Interview-main/AI-Mock-Interview-main/ai-mock-interview/firebase/admin.ts"],"sourcesContent":["import {initializeApp,cert, getApps} from 'firebase-admin/app';\r\nimport { getAuth } from 'firebase-admin/auth';\r\nimport { getFirestore } from 'firebase-admin/firestore';\r\n\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n    if(!apps.length){ \r\n        initializeApp({\r\n            credential:cert({\r\n                projectId: process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n')\r\n            })\r\n        })\r\n    }\r\n    return{\r\n        auth:getAuth(),\r\n        db:getFirestore()\r\n    }\r\n}\r\n\r\nexport const {auth, db} = initFirebaseAdmin(); "],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAGA,MAAM,oBAAoB;IACtB,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IACnB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACV,YAAW,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBACZ,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAClE;QACJ;IACJ;IACA,OAAM;QACF,MAAK,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACX,IAAG,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IAClB;AACJ;AAEO,MAAM,EAAC,IAAI,EAAE,EAAE,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ASUS/Downloads/AI-Mock-Interview-main/AI-Mock-Interview-main/ai-mock-interview/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { auth, db } from \"@/firebase/admin\";\r\nimport { cookies } from \"next/headers\";\r\n\r\nconst ONE_WEEK = 60 * 60 * 24 * 7; // 7 days\r\n\r\nexport async function signUp(params: SignUpParams) {\r\n    const { uid, name, email } = params;\r\n    try {\r\n        const userRecord = await db.collection(\"users\").doc(uid).get();\r\n        if (userRecord.exists) {\r\n            return {\r\n                success: false,\r\n                message: \"User already exists.please login\",\r\n            }\r\n        }\r\n        await db.collection(\"users\").doc(uid).set({\r\n            name,\r\n            email,\r\n        }); \r\n        return{\r\n            success: true,\r\n            message: \"User created successfully.please login\",\r\n        };\r\n    \r\n    } catch (e: any) {\r\n        console.error(\"Error signing up user:\", e);\r\n        if (e.code === \"auth/email-already-exists\") {\r\n            return {\r\n                success: false,\r\n                message: \"Email already exists\",\r\n            };\r\n        }\r\n\r\n        return{\r\n            success: false,\r\n            message: \"Failed to create user account\",\r\n        }\r\n    }\r\n}\r\n\r\nexport async function signIn(params: SignInParams) {\r\n    const { email, idToken } = params;\r\n    try{\r\n        const userRecord = await auth.getUserByEmail(email);\r\n        if(!userRecord) {\r\n            return {\r\n                success: false,\r\n                message: \"User not found, craete an account\",\r\n            }\r\n        }\r\n        await setSessionCookie(idToken);\r\n    }catch(e:any){\r\n        console.log(\"Error signing in user:\", e);\r\n        return {\r\n            success: false,\r\n            message: \"Failed to sign in user\",  \r\n        }\r\n    }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string) {\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = await auth.createSessionCookie(idToken, {\r\n        expiresIn: ONE_WEEK*1000, // 7 days\r\n    });\r\n\r\n    cookieStore.set('session',sessionCookie,{\r\n        maxAge: ONE_WEEK,\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        path: '/',\r\n        sameSite: 'lax',\r\n    })\r\n}\r\n\r\nexport async function getCurrentUser():Promise<User | null>{\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = cookieStore.get('session')?.value;\r\n    if(!sessionCookie) return null;\r\n    try{\r\n        const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n        const userRecord = await db.collection('users').doc(decodedClaims.uid).get();\r\n\r\n        if(!userRecord.exists) return null;\r\n\r\n        return {\r\n            ...userRecord.data(),\r\n            id:userRecord.id,\r\n        } as User;\r\n    }catch(e:any){\r\n        console.log(e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function isAuthenticated(){\r\n    const user = await getCurrentUser();\r\n\r\n    return !!user;\r\n}"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;;;;;;AAEA,MAAM,WAAW,KAAK,KAAK,KAAK,GAAG,SAAS;AAErC,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAC7B,IAAI;QACA,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAC5D,IAAI,WAAW,MAAM,EAAE;YACnB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QACA,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YACtC;YACA;QACJ;QACA,OAAM;YACF,SAAS;YACT,SAAS;QACb;IAEJ,EAAE,OAAO,GAAQ;QACb,QAAQ,KAAK,CAAC,0BAA0B;QACxC,IAAI,EAAE,IAAI,KAAK,6BAA6B;YACxC,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,OAAM;YACF,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAEO,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAC3B,IAAG;QACC,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAC7C,IAAG,CAAC,YAAY;YACZ,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QACA,MAAM,iBAAiB;IAC3B,EAAC,OAAM,GAAM;QACT,QAAQ,GAAG,CAAC,0BAA0B;QACtC,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAEO,eAAe,iBAAiB,OAAe;IAClD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAC1D,WAAW,WAAS;IACxB;IAEA,YAAY,GAAG,CAAC,WAAU,eAAc;QACpC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACd;AACJ;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAG,CAAC,eAAe,OAAO;IAC1B,IAAG;QACC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QACpE,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,cAAc,GAAG,EAAE,GAAG;QAE1E,IAAG,CAAC,WAAW,MAAM,EAAE,OAAO;QAE9B,OAAO;YACH,GAAG,WAAW,IAAI,EAAE;YACpB,IAAG,WAAW,EAAE;QACpB;IACJ,EAAC,OAAM,GAAM;QACT,QAAQ,GAAG,CAAC;QACZ,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IAEnB,OAAO,CAAC,CAAC;AACb;;;IA9FsB;IAmCA;IAoBA;IAeA;IAoBA;;AA1FA,+OAAA;AAmCA,+OAAA;AAoBA,+OAAA;AAeA,+OAAA;AAoBA,+OAAA","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ASUS/Downloads/AI-Mock-Interview-main/AI-Mock-Interview-main/ai-mock-interview/app/%28root%29/layout.tsx"],"sourcesContent":["\r\nimport { isAuthenticated } from '@/lib/actions/auth.action'\r\nimport Image from 'next/image'\r\nimport Link from 'next/link'\r\nimport { redirect } from 'next/navigation'\r\nimport{ ReactNode } from 'react'\r\n\r\nconst RootLayout = async({children}:{children:ReactNode}) => {\r\n  const isUserAuthenticated = await isAuthenticated();\r\n  \r\n  if(!isUserAuthenticated)redirect('/sign-up')\r\n  return (\r\n    <div className='root-layout'>\r\n      <nav>\r\n      <Link href=\"/\" className='flex items-center gap-2'>\r\n        <Image src=\"/logo.svg\" alt=\"Logo\" width={38} height={32}/>\r\n        <h2 className='text-primary-100'>PrepWise</h2>\r\n      </Link>\r\n      </nav>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RootLayout"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;AAGA,MAAM,aAAa,OAAM,EAAC,QAAQ,EAAsB;IACtD,MAAM,sBAAsB,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD;IAEhD,IAAG,CAAC,qBAAoB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;0BACD,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACvB,8OAAC,6HAAA,CAAA,UAAK;4BAAC,KAAI;4BAAY,KAAI;4BAAO,OAAO;4BAAI,QAAQ;;;;;;sCACrD,8OAAC;4BAAG,WAAU;sCAAmB;;;;;;;;;;;;;;;;;YAGlC;;;;;;;AAGP;uCAEe","debugId":null}}]
}